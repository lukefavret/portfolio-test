---
// src/components/ui/NavLink.astro

/**
 * Navigation Link Component
 *
 * A reusable component for navigation links that automatically detects
 * when it is "active" (i.e., it points to the current page).
 *
 * Accessibility:
 * - When active, it applies `aria-current="page"` to programmatically
 *   inform assistive technologies that this link represents the current page.
 *   This is a key accessibility feature for navigation.
 *
 * Styling:
 * - Active links are visually distinguished with a bold font weight and
 *   the site's accent color.
 * - It includes the `.focus-ring` class for visible keyboard focus.
 */

// --- PROPS ---
export interface Props {
  /** The URL the link should point to. */
  href: string;
}

const { href } = Astro.props;

// Determine if this link is for the current page.
// We compare the link's href with the current page's pathname from Astro's global.
// Note: `Astro.url.pathname` includes a trailing slash for root paths, so we
// need to handle that for accurate comparison.
const isActive =
  href === Astro.url.pathname || href === Astro.url.pathname.slice(0, -1);
---

<a
  href={href}
  class:list={[
    // Reserve a full 2px transparent border to avoid layout shift on hover/active.
    // Center the label horizontally and vertically.
    'focus-ring relative flex h-full w-24 items-center justify-center text-center whitespace-nowrap rounded-none border border-transparent transition-colors duration-200 hover:border-textSecondary',
    {
      // Active: full border (border-accent) + extra bottom stripe via ::after that
      // overlaps the outer border (no gap). Use a 2px tall stripe positioned
      // 2px below the element's inner box so it sits flush with the outer border.
      'relative border-accent font-bold text-accent after:pointer-events-none after:absolute after:bottom-[-1px] after:left-0 after:right-0 after:h-[3px] after:bg-accent after:content-[""]':
        isActive,
      // Inactive: normal text with transparent border (keeps space).
      'text-text': !isActive,
    },
  ]}
  aria-current={isActive ? 'page' : false}
>
  <slot />
</a>
