---
// src/components/ui/Tag.astro

/**
 * Tag Component
 *
 * A small, presentational component for displaying a single project tag.
 * It's designed to be used in lists of tags on project cards and pages.
 * It dynamically applies a background color based on the tag's name.
 *
 * Props:
 * - `name`: The name of the tag to display, e.g., "UX Design".
 * - `class`: Allows passing additional CSS classes for layout adjustments.
 */

// --- PROPS ---
export interface Props {
  name: string;
  class?: string;
}

const { name, class: className } = Astro.props;

/**
 * Converts a string into a URL-friendly slug.
 * This is used to create a CSS class from the tag name.
 * e.g., "Full Stack Dev" -> "full-stack-dev"
 * @param text The string to slugify.
 * @returns A slugified string.
 */
const slugify = (text: string) => {
  if (!text) return '';
  return text
    .toString()
    .toLowerCase()
    .trim()
    .replace(/\s+/g, '-') // Replace spaces with -
    .replace(/&/g, '-and-') // Replace & with 'and'
    .replace(/[^\w\-]+/g, '') // Remove all non-word chars
    .replace(/\-\-+/g, '-'); // Replace multiple - with single -
};

// Generate the specific CSS class for this tag.
const tagColorClass = `tag-${slugify(name)}`;
---

<div
  class:list={[
    'border border-textSecondary px-3 py-1 font-mono text-xs uppercase text-stone-950',
    tagColorClass, // This class will apply the background color
    className,
  ]}
>
  {name}
</div>
