---
// src/components/global/SiteHeader.astro
import NavLink from '@components/ui/NavLink.astro';
import MobileNav from '@components/interactive/MobileNav.tsx';
import DarkModeToggle from '@components/interactive/DarkModeToggle.tsx';

/**
 * Site Header Component
 *
 * Renders the main header, including the site title and primary navigation.
 * This component is responsive:
 * - On large screens (lg and up), it displays a horizontal navigation bar.
 * - On smaller screens, it displays a hamburger menu that toggles a full-screen
 *   navigation panel.
 *
 * Accessibility:
 * - Uses `<header>` as a top-level landmark.
 * - The navigation is wrapped in `<nav>` with a descriptive `aria-label`.
 * - The mobile navigation is managed by an interactive island (`MobileNav.tsx`)
 *   that handles ARIA attributes (`aria-expanded`, `aria-controls`) and focus.
 */

// Define the navigation links for the site.
const navLinks = [
  { href: '/', text: 'Home' },
  { href: '/portfolio/', text: 'Portfolio' },
  { href: '/about/', text: 'About' },
  { href: '/resume/', text: 'Resume' },
  { href: '/contact/', text: 'Contact' },
];

const { class: className } = Astro.props;
---

<header
  class:list={[
    // span the full viewport horizontally
    'top-0 inset-x-0 z-30 border-b border-textTertiary bg-surface/80 text-lg backdrop-blur-sm',
    className,
  ]}
>
  <div
    class="mx-auto flex h-16 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8"
  >
    <!-- Site Title / Logo -->
    <a href="/" class="focus-ring font-headingSpecial text-3xl font-bold tracking-wide">
      Luke Favret
      <span class="sr-only">Portfolio Home</span>
    </a>

  <!-- Right side: Desktop nav, mobile nav button, and utilities -->
  <div class="flex items-center space-x-4 h-full">
      <!-- Desktop Navigation (Visible on large screens) -->
      <nav aria-label="Primary" class="hidden lg:block h-full">
        <ul class="flex h-full items-stretch font-body">
          {
            navLinks.map((link) => (
              <li class="flex h-full">
                <NavLink href={link.href}>{link.text}</NavLink>
              </li>
            ))
          }
        </ul>
      </nav>

      <!-- Utilities: Dark mode toggle (visible on desktop only; mobile placed inside MobileNav) -->
      <div class="hidden lg:flex items-center h-full">
        <DarkModeToggle client:load />
      </div>
    </div>

    <!-- Mobile Navigation (Visible on small screens). Keep it here so hamburger stays on the right. -->
    <div class="z-50 lg:hidden">
      <MobileNav client:load>
        <!-- The content of the mobile nav panel is passed as a child -->
        <nav
          aria-label="Primary"
          class="flex h-full flex-col items-center justify-center"
        >
          <ul class="flex flex-col items-center gap-y-4 font-body text-2xl">
            {
              navLinks.map((link) => (
                <li>
                  <!-- Re-using the NavLink component for consistent styling -->
                  <NavLink href={link.href}>{link.text}</NavLink>
                </li>
              ))
            }
          </ul>

          <!-- Mobile utilities row below links: place controls horizontally here -->
          <div class="mt-8 flex w-full justify-center">
            <div class="flex items-center gap-4">
              <DarkModeToggle client:load />
              <!-- Future controls can be added here in a row -->
            </div>
          </div>
        </nav>
      </MobileNav>
    </div>
    
  </div>
</header>
