---
import Tag from './Tag.astro';
import Button from './Button.astro';
import type { CollectionEntry } from 'astro:content';
/**
 * Displays project summary with hover video and action links.
 */
export interface Props {
  project: CollectionEntry<'projects'>;
}
const { project } = Astro.props as Props;
const { data } = project;
---
<article class="group border-b border-accent pb-6 mb-6">
  <a href={`/portfolio/${data.slug}`} class="block relative" aria-label={data.title}>
    {data.media.thumbnailImage && (
      <img
        src={data.media.thumbnailImage}
        alt={data.media.alt || ''}
        class="w-full object-cover"
      />
    )}
    {data.media.hoverVideo && (
      <video
        src={data.media.hoverVideo}
        class="absolute inset-0 w-full h-full object-cover hidden motion-safe:group-hover:block"
        muted
        loop
        playsinline
      ></video>
    )}
    <span class="absolute top-1 left-1 bg-bg text-accent text-xl">►</span>
  </a>
  <h3 class="font-serif text-2xl mt-4">{data.title}</h3>
  <p class="mt-2">{data.summary}</p>
  <div class="flex gap-2 mt-2">
    {data.tags.map((t) => <Tag label={t} />)}
  </div>
  <div class="flex gap-4 mt-4">
    {data.hasPrototype && data.prototypeUrl && (
      <Button href={data.prototypeUrl} variant="secondary">↗ try prototype</Button>
    )}
    <Button href={`/portfolio/${data.slug}`} variant="secondary">⇌ see breakdown</Button>
  </div>
</article>
