---
// src/pages/index.astro
import { getCollection } from 'astro:content';
import BaseLayout from '@layouts/BaseLayout.astro';
import ProjectCard from '@components/ui/ProjectCard.astro';
import Button from '@components/ui/Button.astro';

/**
 * Landing Page (Homepage)
 *
 * This page serves as the main entry point to the portfolio. It showcases
 * a curated selection of the most recent projects to give visitors a quick
 * and impactful overview of the work.
 *
 * It fetches the 3 latest projects from the content collection and displays
 * them in a responsive grid using the `ProjectCard` component.
 */

// Fetch all projects from the content collection.
const allProjects = await getCollection('projects');

// Sort projects by date in descending order (newest first).
const sortedProjects = allProjects.sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);

// Get the 3 most recent projects to feature on the homepage.
const featuredProjects = sortedProjects.slice(0, 3);

const pageTitle = 'Home';
const pageDescription =
  'The portfolio of a designer and developer with a passion for creating accessible, human-centered digital experiences.';
---

<BaseLayout title={pageTitle} description={pageDescription}>
  <div class="mx-auto max-w-7xl px-4 py-16 sm:px-6 sm:py-24 lg:px-8">
    <!-- Introduction Section -->
    <section class="text-center">
      <h1 class="font-heading text-4xl font-bold uppercase tracking-wider sm:text-5xl">
        Designing with Purpose
      </h1>
      <p class="mx-auto mt-4 max-w-2xl font-body text-lg text-text/80">
        I build and design digital products with a focus on accessibility,
        performance, and a clean, editorial aesthetic inspired by classic
        engineering.
      </p>
    </section>

    <!-- Featured Projects Section -->
    <section class="mt-16 sm:mt-24">
      <h2 class="sr-only">Featured Projects</h2>
      <!-- Responsive grid for project cards -->
      <div class="grid grid-cols-1 gap-x-8 gap-y-16 md:grid-cols-2 lg:grid-cols-3">
        {
          featuredProjects.map((project) => (
            <ProjectCard {project} />
          ))
        }
      </div>
    </section>

    <!-- Call to Action -->
    <section class="mt-16 text-center sm:mt-24">
      <Button href="/portfolio" variant="primary" class="text-lg">
        View All Projects
      </Button>
    </section>
  </div>
</BaseLayout>
