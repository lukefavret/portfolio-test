---
import BaseLayout from '../../layouts/BaseLayout.astro';
import SiteHeader from '../../components/SiteHeader.astro';
import SiteFooter from '../../components/SiteFooter.astro';
import HeroFigure from '../../components/HeroFigure.astro';
import MetaBar from '../../components/MetaBar.astro';
import Button from '../../components/Button.astro';
import { getCollection } from 'astro:content';
export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map((p) => ({ params: { slug: p.data.slug } }));
}
const { slug } = Astro.params;
const project = (await getCollection('projects')).find((p) => p.data.slug === slug);
if (!project) throw new Error('Project not found');
const data = project.data;
const discipline = data.discipline || 'UX Design / Full Stack Dev.';
const published = new Date(data.date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
const displayedDate = data.displayedDate || published;
---
<BaseLayout title={data.title}>
  <SiteHeader />
  <main id="main" class="max-w-3xl mx-auto p-4">
    <MetaBar discipline={discipline} date={published} />
    <h1 class="font-serif text-3xl text-center mt-8">{data.title.toUpperCase()}</h1>
    <p class="text-center mt-2">{displayedDate}</p>
    <HeroFigure num={2} caption="The User Flow of The Website">
      {data.media.thumbnailImage ? (
        <img src={data.media.thumbnailImage} alt={data.media.alt} class="mx-auto" />
      ) : (
        <div class="w-full h-64 bg-accent" aria-hidden="true"></div>
      )}
    </HeroFigure>
    <section class="mt-8">
      <h2 class="font-mono mb-2">fig. 1. STAR Overview</h2>
      <ul class="list-disc pl-6">
        <li><strong>Situation:</strong> TODO</li>
        <li><strong>Task:</strong> TODO</li>
        <li><strong>Action:</strong> TODO</li>
        <li><strong>Results:</strong> TODO</li>
      </ul>
    </section>
    <div class="text-center mt-8">
      <Button href="#full-case-study" variant="primary">UNROLL DETAILED CASE STUDY â–¼</Button>
    </div>
    <section id="full-case-study" class="mt-12">
      <p>TODO full case study content.</p>
    </section>
  </main>
  <SiteFooter />
</BaseLayout>
